<!DOCTYPE html>
<html>
  <head>
    <title>Hello, World!</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    
<!-- B5 Chat Widget -->
<script>
(function() {
  const CHAT_URL = 'https://nyansafrontendb5.onrender.com/landing.html';

  // Create container
  const container = document.createElement('div');
  container.id = 'b5-chat-widget';
  container.style.cssText = 'all: initial;';
  document.body.appendChild(container);

  // Attach shadow DOM
  const shadow = container.attachShadow({ mode: 'open' });

  shadow.innerHTML = `
    <style>
      :host { all: initial; } 
      .chat-btn {
        position: fixed;
        bottom: 45px;
        right: 28px;
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background: white;
        border: none;
        cursor: pointer;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        transition: all 0.3s ease;
        padding: 0;
        overflow: hidden;
        pointer-events: auto;
      }

      .chat-btn.hidden {
        display: none !important;
        pointer-events: none !important;
      }

      .chat-btn img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 50%;
        margin-left: -2px;
      }

      .chat-btn:hover {
        transform: scale(1.1);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
      }

      .chat-btn:active {
        transform: scale(0.95);
      } 
      .chat-panel {
        position: fixed;
        bottom: 90px;
        right: 20px;
        width: 420px;
        height: 600px;
        background: white;
        border-radius: 0;
        box-shadow: 0 5px 40px rgba(0, 0, 0, 0.16);
        display: none;
        flex-direction: column;
        z-index: 9998;
        overflow: visible;
        animation: slideUp 0.3s ease;
        border: none;
      }

      .close-arrow {
        position: absolute;
        top: 1%;
        left: 88%;
        background: #fbfbfb;
        border: 2px solid #fbfbfb;
        color: #be1e2d;
        cursor: pointer;
        font-size: 25px;
        padding: 8px 12px;
        border-radius: 4px;
        width: auto;
        height: auto;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10001;
        transition: all 0.2s;
        font-weight: bold;
      }

      .close-arrow:hover {
        background: #ffe6e6;
        color: #be1e2d;
        border: 2px solid #fbfbfb;
      }

      .chat-panel.open {
        display: flex;
      }

      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .chat-header {
        background: linear-gradient(135deg, #be1e2d 0%, #8B1621 100%);
        color: white;
        padding: 16px;
        display: none;
        justify-content: flex-end;
        align-items: center;
        border-radius: 12px 12px 0 0;
        min-height: 50px;
      }

      .chat-title {
        display: none;
      }

      .close-btn {
        background: none;
        border: none;
        color: white;
        cursor: pointer;
        font-size: 28px;
        padding: 0;
        width: 40px;
        height: 40px;
        display: none;
        align-items: center;
        justify-content: center;
        transition: transform 0.2s;
      }

      .close-btn:hover {
        transform: rotate(90deg);
      }

      .chat-iframe {
        flex: 1;
        border: none;
        width: 100%;
        height: 100%;
      }

    
      /* 456px to 479px */
      @media (min-width: 456px) and (max-width: 479px) {
        .close-arrow {
          font-size: 25px;
          padding: 6px 8px;
          border: 1.5px solid #be1e2d;
          top: 1%;
          left: 88%;
        }
      }


      /* 249px to 300px */
      @media (min-width: 249px) and (max-width: 300px) {
        .close-arrow {
          top: 1%;
          left: 80%;
          font-size: 15px;
        }
      }

      /* 300px to 361px */
      @media (min-width: 300px) and (max-width: 361px) {
        .close-arrow {
          top: 0.1%;
          left: 83%;
          font-size: 20px;
        }
      }

      /* 362px to 423px */
      @media (min-width: 362px) and (max-width: 423px) {
        .close-arrow {
          top: 1%;
          left: 86%;
          font-size: 18px;
        }
      }

      /* 424px */
      @media (min-width: 424px) and (max-width: 424px) {
        .close-arrow {
          top: 1%;
          left: 86%;
        }
      }

      /* 425px to 480px */
      @media (min-width: 425px) and (max-width: 480px) {
        .close-arrow {
          font-size: 25px;
          padding: 6px 8px;
          border: none;
          top: 1%;
          left: 87%;
        }
      }

      /* Mobile adjustments for all sizes */
      @media (max-width: 480px) {
        .chat-panel {
          width: 85vw;
          height: 70vh;
          bottom: 80px;
          right: 20px;
          border-radius: 0;
        }

        .chat-panel.open {
          width: 85vw;
          height: 70vh;
          bottom: 80px;
          right: 20px;
        }
      }
    </style>

    <button class="chat-btn" id="chatBtn" title="Open Chat"><img src="https://aichatbotimage.onrender.com/bot.png" alt="Chat Bot"></button>
    <div class="chat-panel" id="chatPanel">
      <button class="close-arrow" id="closeArrow" title="Close Chat">↩</button>
      <div class="chat-header">
        <span class="chat-title">B5 Intelligent</span>
        <button class="close-btn" id="closeBtn">✕</button>
      </div>
      <iframe class="chat-iframe" id="chatIframe" src="about:blank" allow="clipboard-write; fullscreen"></iframe>
    </div>
  `;

  const chatBtn = shadow.getElementById('chatBtn');
  const chatPanel = shadow.getElementById('chatPanel');
  const closeBtn = shadow.getElementById('closeBtn');
  const closeArrow = shadow.getElementById('closeArrow');
  const chatIframe = shadow.getElementById('chatIframe');
  let isOpen = false;

  function isMobile() {
    return window.innerWidth <= 480;
  }

  function showButton() {
    if (isMobile()) { 
      chatBtn.classList.remove('hidden');
    }
  }

  function hideButton() {
    if (isMobile()) {
      chatBtn.classList.add('hidden');
    }
  }

  chatBtn.addEventListener('click', () => {

    isOpen = !isOpen;
    if (isOpen) {
      chatPanel.classList.add('open');
      hideButton();
      if (chatIframe.src === 'about:blank') {
        chatIframe.src = CHAT_URL;
      }
      document.body.style.overflow = 'hidden';
    } else {
      chatPanel.classList.remove('open');
      showButton();
      document.body.style.overflow = '';
    }
  });

  closeBtn.addEventListener('click', (e) => {
    e.stopPropagation();
    isOpen = false;
    chatPanel.classList.remove('open');
    showButton();
    document.body.style.overflow = '';
  });

  closeArrow.addEventListener('click', (e) => {
    e.stopPropagation(); 
    isOpen = false;
    chatPanel.classList.remove('open');
    showButton();
    document.body.style.overflow = '';
  });

  // Close on outside click
  shadow.addEventListener('click', (e) => {
    if (e.target === chatPanel) {
      isOpen = false;
      chatPanel.classList.remove('open');
      showButton();
      document.body.style.overflow = '';
    }
  });

  // Close on Escape key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && isOpen) {
      isOpen = false;
      chatPanel.classList.remove('open');
      showButton();
      document.body.style.overflow = '';
    }
  });
})();
</script>
<!-- End B5 Chat Widget -->
            
  </body>
</html>